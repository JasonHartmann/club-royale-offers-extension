/* General UI elements, buttons, breadcrumbs, filters, animations extracted from styles.css */
/* Whats New pulse */
@keyframes goboPulse { 0% { transform:scale(1); } 50% { transform:scale(1.08); } 100% { transform:scale(1); } }
.gobo-whatsnew-focus { animation:goboFocusGlow 1.5s infinite; }
@keyframes goboFocusGlow { 0% { box-shadow:0 0 0 4px rgba(251,191,36,.35),0 0 18px 6px rgba(251,191,36,.5);} 50% { box-shadow:0 0 0 2px rgba(251,191,36,.25),0 0 8px 3px rgba(251,191,36,.35);} 100% { box-shadow:0 0 0 4px rgba(251,191,36,.35),0 0 18px 6px rgba(251,191,36,.5);} }
.gobo-whatsnew-tooltip { animation:fadeInScale .25s ease; }
@keyframes fadeInScale { 0% { opacity:0; transform:translateY(6px) scale(.96);} 100% { opacity:1; transform:translateY(0) scale(1);} }
.close-button { background:#dc2626; color:#fff; font-weight:600; padding:8px 16px; border-radius:0.5rem; cursor:pointer; }
.close-button:hover { background:#b91c1c; }
.buy-coffee-link {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 6px 8px;
    margin-right: 6px;
    background: transparent;
    color: inherit;
    text-decoration: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    font-size: 13px;
    transition: background .15s, transform .08s;
}
.buy-coffee-link:hover { background: rgba(0,0,0,0.04); transform: translateY(-1px); }
.buy-coffee-link:focus { outline: 2px solid #ffd166; outline-offset: 2px; }
.coffee-emoji { font-size: 18px; line-height: 1; display:inline-block; }
.export-csv-button { background:#22c55e; color:#fff; font-weight:600; padding:8px 16px; border-radius:0.5rem; cursor:pointer; margin-right:12px; transition:background .2s; }
.export-csv-button:hover { background:#16a34a; }
/* Back-to-Back (B2B) search button styling — moved from inline in tableRenderer.js */
.b2b-search-button { margin-left:12px; background:#0d3b66; color:#fff; border:none; padding:4px 10px; font-size:11px; border-radius:4px; cursor:pointer; font-weight:600; transition:background .15s, transform .08s; }
.b2b-search-button:hover { background:#0b3557; transform:translateY(-1px); }
.b2b-side-by-side-toggle { margin-left:12px; display:inline-flex; align-items:center; gap:6px; font-size:11px; font-weight:600; cursor:pointer; user-select:none; }
.b2b-side-by-side-toggle input { cursor:pointer; accent-color:#0d3b66; }
.b2b-chevrons { display:inline-flex; align-items:center; justify-content:center; gap:4px; padding:4px 10px; border-radius:999px; background:linear-gradient(90deg,#0c4ea3 0%,#1f7edc 100%); color:#fff; font-weight:600; font-size:11px; line-height:1; box-shadow:0 3px 8px rgba(8,52,99,0.25); min-width:46px; position:relative; }
.b2b-chevrons::after { content:'>>'; font-weight:700; letter-spacing:0.5px; font-size:10px; opacity:0.9; }
.b2b-chevrons-value { font-size:12px; letter-spacing:0.03em; font-variant-numeric:tabular-nums; }
.b2b-depth-cell-action:focus-visible { outline:2px solid rgba(12,78,163,0.8); outline-offset:1px; border-radius:999px; }
.b2b-pill-button { border:none; cursor:pointer; transition:transform .15s, box-shadow .15s; }
.b2b-pill-button:focus-visible { outline:2px solid rgba(255,255,255,0.85); outline-offset:2px; }
.b2b-pill-button:hover { transform:translateY(-1px); box-shadow:0 6px 14px rgba(9,45,92,0.35); }
/* Ensure pill areas show interactive cursor across table and accordion views */
.b2b-depth-cell-action, .b2b-depth-cell-action .b2b-chevrons, .b2b-chevrons { cursor: pointer; }
.b2b-depth-cell-action:hover .b2b-chevrons, .b2b-chevrons:hover { transform: translateY(-2px); box-shadow: 0 8px 18px rgba(9,45,92,0.28); }
/* Ensure the inner chevrons show interactive cues only when the cell is actually bound */
.b2b-depth-cell-action[data-b2b-cell-bound="true"] { cursor: pointer; pointer-events: auto; }
.b2b-depth-cell-action[data-b2b-cell-bound="true"] .b2b-chevrons,
.b2b-depth-cell-action[data-b2b-cell-bound="true"] > .b2b-chevrons { cursor: pointer; }
.b2b-depth-cell-action[data-b2b-cell-bound="true"] .b2b-chevrons:hover,
.b2b-depth-cell-action[data-b2b-cell-bound="true"] > .b2b-chevrons:hover { transform: translateY(-2px); box-shadow: 0 8px 18px rgba(9,45,92,0.28); }

.b2b-visualizer-overlay { position:fixed; inset:0; background:rgba(5,13,32,0.65); z-index:2147483651; display:flex; align-items:center; justify-content:center; padding:24px; backdrop-filter:blur(2px); }
.b2b-visualizer-modal { width:min(1100px,95vw); max-height:92vh; background:#f7f9fc; border-radius:22px; box-shadow:0 30px 60px rgba(0,0,0,0.45); display:flex; flex-direction:column; overflow:hidden; border:1px solid rgba(255,255,255,0.2); }
.b2b-visualizer-header { padding:20px 28px; background:linear-gradient(120deg,#0c4ea3,#1f7edc); color:#fff; display:flex; justify-content:space-between; align-items:flex-start; gap:12px; }
.b2b-visualizer-title { font-size:20px; font-weight:700; margin:0; }
.b2b-visualizer-subtitle { font-size:13px; opacity:0.9; margin-top:4px; max-width:540px; }
.b2b-visualizer-close { border:none; background:rgba(255,255,255,0.15); color:#fff; width:32px; height:32px; border-radius:8px; font-size:18px; font-weight:600; cursor:pointer; transition:background .15s, transform .1s; }
.b2b-visualizer-close:hover { background:rgba(255,255,255,0.3); transform:translateY(-1px); }
.b2b-visualizer-body { padding:24px 28px; display:grid; grid-template-columns:320px 1fr; gap:24px; overflow:auto; flex:1; min-height:0; }
.b2b-chain-column, .b2b-option-column { display:flex; flex-direction:column; gap:16px; min-height:0; overflow:hidden; }
.b2b-chain-cards, .b2b-option-list { flex:1 1 auto; min-height:0; overflow:auto; /* reserve space for scrollbars so cards don't overlap them */ padding-right: 11px; scrollbar-gutter: stable both-edges; }
.b2b-section-title { font-size:15px; font-weight:700; color:#0f172a; display:flex; align-items:center; gap:8px; margin:0; }
.b2b-section-title small { font-size:11px; font-weight:500; color:#64748b; text-transform:uppercase; letter-spacing:0.06em; }
.b2b-chain-cards { display:flex; flex-direction:column; gap:14px; min-height:0; overflow:auto; }
.b2b-chain-card { border-radius:18px; background:#fff; padding:16px; box-shadow:0 10px 24px rgba(15,23,42,0.12); border:1px solid rgba(15,23,42,0.08); position:relative; display:flex; flex-direction:column; gap:8px; /* allow the card to grow horizontally to fit long single-line timelines */ min-width: max-content; overflow: visible; }
.b2b-chain-card, .b2b-option-card { z-index: 0; }
.b2b-chain-card.is-root { background:linear-gradient(135deg,#e0ecff,#f2f6ff); border-color:rgba(12,78,163,0.2); }
.b2b-chain-step-head { display:flex; justify-content:space-between; gap:8px; align-items:flex-start; }
.b2b-chain-step-head h4 { margin:0; font-size:15px; color:#0f172a; }
.b2b-chain-step-head span { font-size:11px; font-weight:600; color:#475569; text-transform:uppercase; letter-spacing:0.04em; display:inline-block; padding-right:28px; box-sizing:border-box; }
.b2b-chain-meta { font-size:13px; color:#1e293b; display:flex; flex-direction:column; gap:4px; }
.b2b-chain-meta strong { font-size:12px; color:#0f172a; }
.b2b-chain-ports { font-size:12px; color:#475569; line-height:1.4; border-left:3px solid rgba(15,23,42,0.15); padding-left:10px; margin-top:6px; }
.b2b-chain-card .b2b-timeline-table {
    /* let the timeline determine its own width and avoid forcing fixed cell layout
       so each day-by-day row stays on a single line */
    width: auto;
    border-collapse: collapse;
    box-sizing: border-box;
    font-size: 13px;
    display: table;
    table-layout: auto;
    max-height: none;
    overflow: visible;
    white-space: nowrap;
}
.b2b-chain-card .b2b-timeline-table tbody {
    display: table-row-group;
    max-height: none;
    overflow: visible;
}
.b2b-chain-card .b2b-timeline-table tr {
    display: table-row;
    width: 100%;
    table-layout: fixed;
}
.b2b-timeline-day {
    width: 60px;
    font-weight: bold;
    color: #0f172a;
    padding: 2px 4px; /* reduce left/right padding a bit */
    white-space: nowrap;
    font-size: 13px;
}
.b2b-timeline-dow {
    width: 48px;
    color: #64748b;
    padding: 2px 4px; /* reduce left/right padding a bit */
    white-space: nowrap;
    font-size: 13px;
}
.b2b-timeline-label {
    color: #475569;
    padding: 2px 4px; /* reduce left padding to tighten up the line start */
    white-space: nowrap; /* keep each summary on a single line */
    overflow: visible; /* allow the card to grow instead of clipping */
    text-overflow: clip;
    font-size: 13px;
}
.b2b-chain-card .b2b-timeline::-webkit-scrollbar {
    width: 8px;
}
.b2b-chain-card .b2b-timeline::-webkit-scrollbar-thumb {
    background: rgba(15,23,42,0.25);
    border-radius: 999px;
}
.b2b-chain-card .b2b-timeline::-webkit-scrollbar-track {
    background: transparent;
}
.b2b-chain-remove { position:absolute; top:12px; right:12px; border:none; background:rgba(239,68,68,0.08); color:#b91c1c; border-radius:999px; width:28px; height:28px; font-size:14px; font-weight:700; cursor:pointer; display:flex; align-items:center; justify-content:center; }
.b2b-chain-remove:hover { background:rgba(239,68,68,0.18); }
.b2b-timeline { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:6px; font-size:12px; color:#475569; }
.b2b-timeline li { display:flex; gap:6px; align-items:flex-start; /* slightly tighter gap */ }
.b2b-timeline .dot { width:6px; height:6px; border-radius:50%; background:#0f172a; margin-top:6px; flex-shrink:0; }
.b2b-option-list { display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:16px; align-items: start; align-content: start; grid-auto-rows: auto; }
.b2b-option-card { background:#fff; border-radius:16px; border:1px solid rgba(15,23,42,0.08); padding:16px; display:flex; flex-direction:column; gap:10px; box-shadow:0 8px 18px rgba(15,23,42,0.08); position:relative; }
.b2b-option-card .b2b-option-card-header { display:flex; align-items:center; justify-content:space-between; gap:8px; }
.b2b-option-card .b2b-option-card-header .badge { margin:0; }
.b2b-option-card .badge { font-size:11px; text-transform:uppercase; letter-spacing:0.05em; font-weight:600; color:#0369a1; }
.b2b-option-card.b2b-side-by-side { border-color:rgba(217,119,6,0.5); box-shadow:0 10px 24px rgba(217,119,6,0.15); }
.b2b-option-meta { font-size:13px; color:#0f172a; display:flex; flex-direction:column; gap:4px; }
.b2b-option-select { margin-top:auto; border:none; border-radius:12px; padding:10px 12px; font-weight:600; font-size:13px; cursor:pointer; background:#0f9d58; color:#fff; transition:background .15s, transform .1s; }

.b2b-option-list .b2b-option-card { align-self: start; }
.b2b-option-select:hover { background:#0a7a43; transform:translateY(-1px); }
.b2b-option-select { display:inline-flex; align-items:center; justify-content:center; gap:10px; position:relative; padding-right:36px; }
.b2b-option-select .b2b-depth-pill { position:absolute; right:8px; top:50%; transform:translateY(-50%); background:rgba(255,255,255,0.12); color:#fff; padding:4px 8px; border-radius:999px; font-size:12px; font-weight:700; display:inline-flex; align-items:center; justify-content:center; min-width:24px; }
.b2b-option-select .b2b-depth-pill svg { height:14px; width:auto; }
.b2b-depth-pill-empty { background: rgba(255,255,255,0.06); color: rgba(255,255,255,0.7); font-weight:600; }

/* When there are zero additional connections, visually de-emphasize the pill
   and remove the chevrons marker. Table cells expose child-count via
   `data-child-count` on the `.b2b-depth-cell` element. */
.b2b-depth-cell[data-child-count="0"] .b2b-chevrons {
    background: linear-gradient(90deg,#f1f5f9 0%,#f8fafc 100%);
    color: #6b7280;
    box-shadow: none;
    border: 1px solid rgba(15,23,42,0.06);
    font-weight:600;
}
.b2b-depth-cell[data-child-count="0"] .b2b-chevrons::after {
    content: '';
}
.b2b-depth-cell[data-child-count="0"] .b2b-chevrons-value {
    color: #475569;
    font-weight:600;
}

/* When a row is highlighted with .gobo-b2b-selected the parent background can tint
   translucent child pills. Force the pills to keep their intended backgrounds/colors. */
.accordion-table tr.gobo-b2b-selected .b2b-chevrons,
.accordion-table td.gobo-b2b-selected .b2b-chevrons,
.gobo-b2b-selected .b2b-chevrons {
    background: linear-gradient(90deg,#0c4ea3 0%,#1f7edc 100%) !important;
    color: #fff !important;
    box-shadow: 0 3px 8px rgba(8,52,99,0.25) !important;
}

/* Exception: when child-count is zero, keep the de-emphasized grey pill even if row is selected */
.gobo-b2b-selected .b2b-depth-cell[data-child-count="0"] .b2b-chevrons,
.accordion-table tr.gobo-b2b-selected .b2b-depth-cell[data-child-count="0"] .b2b-chevrons,
.accordion-table td.gobo-b2b-selected .b2b-depth-cell[data-child-count="0"] .b2b-chevrons {
    /* Re-apply the grey/neutral background and text for empty child-count pills */
    background: linear-gradient(90deg,#f1f5f9 0%,#f8fafc 100%) !important;
    color: #6b7280 !important;
    box-shadow: none !important;
    border: 1px solid rgba(15,23,42,0.06) !important;
}

.accordion-table tr.gobo-b2b-selected .b2b-depth-pill,
.accordion-table td.gobo-b2b-selected .b2b-depth-pill,
.gobo-b2b-selected .b2b-depth-pill {
    /* Keep option pills readable (white translucent on blue backgrounds) */
    background: rgba(255,255,255,0.12) !important;
    color: #fff !important;
    box-shadow: none !important;
}

.accordion-table tr.gobo-b2b-selected .b2b-chain-id-badge,
.gobo-b2b-selected .b2b-chain-id-badge {
    background: #eef2ff !important;
    color: #3730a3 !important;
    border: 1px solid rgba(0,0,0,0.08) !important;
}
.b2b-center-hint { font-size:12px; color:#475569; display:flex; align-items:center; gap:6px; }
.b2b-banner { border-radius:12px; padding:10px 14px; background:#e2e8f0; color:#0f172a; font-size:12px; display:flex; align-items:center; gap:10px; }
.b2b-banner-status { font-weight:600; }
.b2b-banner-message { font-weight:500; }
.b2b-side-note { font-size:12px; color:#1e3a8a; }
.b2b-actions { display:flex; justify-content:space-between; gap:12px; padding:16px 28px 24px; border-top:1px solid rgba(15,23,42,0.08); background:#fff; }
.b2b-action-btn { flex:1; border:none; border-radius:999px; padding:12px 16px; font-weight:600; font-size:14px; cursor:pointer; transition:background .15s, transform .1s; }
.b2b-action-btn.primary { background:#0c4ea3; color:#fff; }
.b2b-action-btn.primary:hover:not(:disabled) { background:#0a4289; transform:translateY(-1px); }
.b2b-action-btn.secondary { background:#e2e8f0; color:#0f172a; }
.b2b-action-btn.secondary:hover { background:#cbd5f5; }
.b2b-action-btn:disabled { opacity:0.5; cursor:not-allowed; transform:none; }
.b2b-empty-state { border:1px dashed rgba(15,23,42,0.2); border-radius:16px; padding:32px; text-align:center; font-size:14px; color:#475569; }
.b2b-empty-state strong { display:block; font-size:16px; margin-bottom:6px; color:#0f172a; }

@media (max-width: 960px) {
    .b2b-visualizer-body { grid-template-columns:1fr; max-height:60vh; }
    .b2b-actions { flex-direction:column; }
    .b2b-action-btn { width:100%; }
}

/* Reduce vertical whitespace for B2B columns and titles on narrow/portrait screens */
@media (max-width: 640px) and (orientation: portrait) {
    .b2b-visualizer-header { padding:12px 14px; }
    .b2b-visualizer-title { font-size:16px; }
    .b2b-visualizer-subtitle { font-size:12px; margin-top:2px; max-width:360px; }
    .b2b-visualizer-body { padding:12px 14px; gap:12px; grid-template-columns:1fr; max-height:70vh; }
    .b2b-chain-column, .b2b-option-column { gap:8px; }
    .b2b-section-title { font-size:13px; gap:6px; }
    .b2b-section-title small { font-size:10px; }
    .b2b-chain-card, .b2b-option-card { padding:10px; gap:6px; }
    .b2b-chain-cards { gap:10px; }
    .b2b-option-list { gap:10px; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); }
    .b2b-action-btn { padding:10px 12px; font-size:13px; }
}

@media (prefers-reduced-motion: reduce) {
    .b2b-pill-button,
    .b2b-option-select,
    .b2b-action-btn,
    .b2b-visualizer-close { transition:none !important; transform:none !important; }
}
/* Venmo circular button — match hover lift and subtle background change */
.venmo-link { transition: background .15s, transform .08s; will-change: transform; }
.venmo-link:hover { transform: translateY(-1px); background: rgba(0,0,0,0.04); }

/* Ensure coffee button also has will-change for smoother render */
.buy-coffee-link { will-change: transform; }

/* Respect users' motion preferences */
@media (prefers-reduced-motion: reduce) {
    .buy-coffee-link, .venmo-link, .b2b-search-button {
        transition: none !important;
        transform: none !important;
        will-change: auto !important;
    }
}

/* Breadcrumbs */
.breadcrumb-container { display:flex; align-items:center; gap:8px; padding:8px; margin-bottom:8px; }
.breadcrumb-link { color:#2563eb; text-decoration:underline; cursor:pointer; }
.breadcrumb-link:hover { color:#1e40af; }
.breadcrumb-arrow { display:none; }
.accordion-view .breadcrumb-arrow { display:inline; }
.breadcrumb-arrow::after { content:'→'; margin:0 8px; }
/* Offer rows highlighting */
.newest-offer-row { background:#DFD !important; }
.expiring-soon-row { background:#FDD !important; }

/* Group icon interactivity for headers (table + accordion) */
.group-icon { display:inline-flex; align-items:center; justify-content:center; width:20px; height:20px; border-radius:6px; cursor:pointer; opacity:0.95; transition:background .12s, transform .08s, box-shadow .12s; }
.group-icon svg { display:block; width:16px; height:16px; }
.group-icon:hover { background: rgba(2,6,23,0.06); transform: translateY(-1px); box-shadow: 0 6px 12px rgba(2,6,23,0.06); }
.group-icon:active { transform: translateY(0); box-shadow: none; }
.group-icon:focus-visible { outline: 2px solid rgba(59,130,246,0.9); outline-offset:2px; }

/* Slightly larger hit area on small screens */
@media (max-width:640px) {
    .group-icon { width:24px; height:24px; border-radius:8px; }
}
/* Updated: tier filter now inline inside breadcrumb */
.tier-filter-toggle { margin-left:auto; display:inline-flex; align-items:center; gap:6px; font-size:12px; background:rgba(255,255,255,0.9); padding:4px 8px; border:1px solid #e5e7eb; border-radius:6px; box-shadow:0 1px 2px rgba(0,0,0,0.08); font-weight:500; }
/* Expanded breadcrumb layout variant */
.breadcrumb-container { display:flex; flex-direction:column; align-items:flex-start; gap:0; padding:8px; margin-bottom:8px; width:100%; }
.breadcrumb-tabs-row { width:100%; margin-bottom:0; }
.breadcrumb-crumb-row { display:flex; align-items:center; gap:8px; width:100%; padding-top:12px; border-top:1px solid #e5e7eb; background:transparent; }
/* Support link styling */
.support-link { display:inline-flex; align-items:center; gap:4px; font-size:10px; color:#2563eb; text-decoration:none; font-weight:600; line-height:1; }
.support-link:hover { text-decoration:underline; color:#1d4ed8; }
.support-link:focus { outline:1px solid #2563eb; outline-offset:2px; }
.support-link-icon { width:14px; height:14px; display:block; border-radius:3px; }
@media (prefers-reduced-motion: reduce) { .support-link { transition:none; } }
